from mcp.server import Server
import requests

server = Server("bank-ai")

# Tool: login user
@server.tool()
def login(username: str, password: str):
    """Login a user and get a JWT token."""
    resp = requests.get(
        "http://userservice:5000/login",
        params={"username": username, "password": password}
    )
    return resp.json()

# Tool: get contacts
@server.tool()
def get_contacts(username: str, token: str):
    """Retrieve user's contacts."""
    headers = {"Authorization": f"Bearer {token}"}
    resp = requests.get(f"http://contacts:5000/contacts/{username}", headers=headers)
    return resp.json()

if __name__ == "__main__":
    server.run()
